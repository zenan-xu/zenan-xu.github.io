"use strict";(self.webpackChunkzenan_website=self.webpackChunkzenan_website||[]).push([[940],{2564:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=t(4848),s=t(8453);const r={id:"spring-boot",sidebar_label:"Spring / Spring-Boot",sidebar_position:3},o="Spring / Spring-Boot",a={id:"spring-boot",title:"Spring / Spring-Boot",description:"Spring Boot auto-configures @EnableKafka if it detects spring-kafka on the class path.",source:"@site/notes/3_spring-boot.md",sourceDirName:".",slug:"/spring-boot",permalink:"/docs/spring-boot",draft:!1,unlisted:!1,editUrl:"https://github.com/zenan-xu/zenan-xu.github.io/tree/main/notes/3_spring-boot.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"spring-boot",sidebar_label:"Spring / Spring-Boot",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Java",permalink:"/docs/java"},next:{title:"Intellij idea",permalink:"/docs/intellij"}},l={},c=[{value:"Dependency injection",id:"dependency-injection",level:3},{value:"Bean scopes",id:"bean-scopes",level:3},{value:"Transactional",id:"transactional",level:3},{value:"Http methods",id:"http-methods",level:3},{value:"Get url of database when debugging",id:"get-url-of-database-when-debugging",level:3},{value:"Get Conditions evaluation report",id:"get-conditions-evaluation-report",level:3},{value:"How http interceptor work (using recursive way)",id:"how-http-interceptor-work-using-recursive-way",level:3},{value:"Steps when a request enters spring application (before arriving in controller)",id:"steps-when-a-request-enters-spring-application-before-arriving-in-controller",level:3},{value:"Spring security and OAuth2",id:"spring-security-and-oauth2",level:3},{value:"SSL",id:"ssl",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"spring--spring-boot",children:"Spring / Spring-Boot"}),"\n",(0,i.jsx)(n.p,{children:"Spring Boot auto-configures @EnableKafka if it detects spring-kafka on the class path."}),"\n",(0,i.jsx)(n.h3,{id:"dependency-injection",children:"Dependency injection"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Constructor injection"}),"\n",(0,i.jsxs)(n.li,{children:["Setter injection","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"cannot make the field private, because we need to set the field via setter"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Field injection","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"violate java, field is marked as private yet spring somehow is able to go ahead and give us an instance of that class to set that field. The way that spring is able to do that is through reflection\nit's private but spring is kind of bypass the conventions of java"}),"\n",(0,i.jsx)(n.li,{children:"can't make the field final"}),"\n",(0,i.jsx)(n.li,{children:"there's a chance that this could be null"}),"\n",(0,i.jsx)(n.li,{children:"testability, you will have to use reflection to get this value in here"}),"\n",(0,i.jsx)(n.li,{children:"the only time when it is okay to use field injection is within a test"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"bean-scopes",children:"Bean scopes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"singleton"}),": (Default) Scopes a single bean definition to a single object instance for each Spring IoC container."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"prototype"}),": Scopes a single bean definition to any number of object instances."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"request"}),", ",(0,i.jsx)(n.code,{children:"session"}),", ",(0,i.jsx)(n.code,{children:"application"}),", and ",(0,i.jsx)(n.code,{children:"websocket"})," scopes are available only if you use a web-aware Spring ApplicationContext implementation (such as XmlWebApplicationContext). If you use these scopes with regular Spring IoC containers, such as the ClassPathXmlApplicationContext, an IllegalStateException that complains about an unknown bean scope is thrown."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"transactional",children:"Transactional"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"@Transactional"}),' annotation is metadata that specifies that an interface, class, or method must have transactional semantics (for example, "start a brand new read-only transaction when this method is invoked, suspending any existing transaction"). The default ',(0,i.jsx)(n.code,{children:"@Transactional"})," settings are as follows:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The propagation setting is ",(0,i.jsx)(n.code,{children:"PROPAGATION_REQUIRED"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The isolation level is ",(0,i.jsx)(n.code,{children:"ISOLATION_DEFAULT"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"The transaction is read-write."}),"\n",(0,i.jsx)(n.li,{children:"The transaction timeout defaults to the default timeout of the underlying transaction system, or to none if timeouts are not supported."}),"\n",(0,i.jsxs)(n.li,{children:["Any ",(0,i.jsx)(n.code,{children:"RuntimeException"})," or ",(0,i.jsx)(n.code,{children:"Error"})," triggers rollback, and any checked ",(0,i.jsx)(n.code,{children:"Exception"})," does not."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In proxy mode (which is the default), only external method calls coming in through the proxy are intercepted. This means that self-invocation (in effect, a method within the target object calling another method of the target object) does not lead to an actual transaction at runtime even if the invoked method is marked with ",(0,i.jsx)(n.code,{children:"@Transactional"})]}),"\n",(0,i.jsx)(n.li,{children:"Propagation"}),"\n",(0,i.jsx)(n.li,{children:"Isolation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"http-methods",children:"Http methods"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["POST","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It is commonly used for creating new resources on the server or for performing actions that result in a state change on the server"}),"\n",(0,i.jsx)(n.li,{children:"POST requests are not idempotent, meaning that sending the same POST request multiple times may result in different outcomes or create duplicate resources"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["PUT","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The PUT method is used to send data to a server to create or update a resource at a specific URI."}),"\n",(0,i.jsx)(n.li,{children:"It is commonly used for updating existing resources on the server"}),"\n",(0,i.jsx)(n.li,{children:"PUT requests are idempotent, meaning that sending the same PUT request multiple times will always result in the same outcome"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["HEAD","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It's often used to check the headers of a resource without actually downloading the resource's content."}),"\n",(0,i.jsx)(n.li,{children:"For example, you might use a HEAD request to check the last-modified timestamp of a resource."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["OPTIONS","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It's used to determine the HTTP methods supported by a server for a specific URL."}),"\n",(0,i.jsx)(n.li,{children:"It's commonly used in cross-origin resource sharing (CORS) to determine whether a cross-origin request is allowed from a client to a server."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["PATCH","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It's used to apply partial modifications to a resource, rather than replacing the entire resource."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CONNECT","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It's used to establish a tunnel to the server identified by the request URI."}),"\n",(0,i.jsx)(n.li,{children:"It's commonly used in HTTP proxies to establish a secure HTTPS connection through an HTTP proxy server."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["TRACE:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It's used to echo the received request back to the client."}),"\n",(0,i.jsx)(n.li,{children:"It's primarily used for diagnostic purposes to debug or troubleshoot HTTP communication between the client and server."}),"\n",(0,i.jsx)(n.li,{children:"However, due to potential security vulnerabilities, many servers disable support for the TRACE method."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"get-url-of-database-when-debugging",children:"Get url of database when debugging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"this.jdbcTemplate.getDataSource().getConnection().getMetaData().getURL()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-conditions-evaluation-report",children:"Get Conditions evaluation report"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"logging:\n  level:\n    org:\n      springframework:\n        boot:\n          autoconfigure: debug\n"})}),"\n",(0,i.jsx)(n.h3,{id:"how-http-interceptor-work-using-recursive-way",children:"How http interceptor work (using recursive way)"}),"\n",(0,i.jsxs)(n.p,{children:["check ",(0,i.jsx)(n.code,{children:"InterceptingClientHttpRequest#execute"})]}),"\n",(0,i.jsx)(n.h3,{id:"steps-when-a-request-enters-spring-application-before-arriving-in-controller",children:"Steps when a request enters spring application (before arriving in controller)"}),"\n",(0,i.jsx)(n.h3,{id:"spring-security-and-oauth2",children:"Spring security and OAuth2"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Spring security : authentication and access control framework","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Authentication is the process of verifying the identity of a user or system."}),"\n",(0,i.jsx)(n.li,{children:'It answers the question: "Who are you?"'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["OAuth2 : authorization framework","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Authorization is the process of determining whether a user or system has permission to access a particular resource or perform a specific action."}),"\n",(0,i.jsx)(n.li,{children:'It answers the question: "Are you allowed to do this?"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ssl",children:"SSL"}),"\n",(0,i.jsx)(n.p,{children:"Put ssl configuration in application.yml instead of bootstrap.yml"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bootstrap.yml"})," or ",(0,i.jsx)(n.code,{children:"bootstrap.properties"}),"\nIt's only used/needed if you're using Spring Cloud and your application's configuration is stored on a remote configuration server (e.g. Spring Cloud Config Server)."]}),"\n",(0,i.jsx)(n.p,{children:"From the documentation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'A Spring Cloud application operates by creating a "bootstrap" context, \nwhich is a parent context for the main application. \nOut of the box it is responsible for loading configuration properties from the external sources, \nand also decrypting properties in the local external configuration files.\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Note that the ",(0,i.jsx)(n.code,{children:"bootstrap.yml"})," or ",(0,i.jsx)(n.code,{children:"bootstrap.properties"})," can contain additional configuration (e.g. defaults) but generally you only need to put bootstrap config here."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"server:\n  ssl:\n    key-store: /path/to/keystore.p12\n    key-store-password: password-to-access-keystore\n    key-store-type: pkcs12 (jks)\n    key-alias: tomcat\n    key-password: password-for-the-private-key-if-you-have-any\n    enabled: true (default is true)\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);